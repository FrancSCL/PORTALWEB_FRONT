# ğŸ“‹ **SOLICITUD BACKEND - INCLUIR TEMPORADA EN PAUTAS**

## ğŸ¯ **PROBLEMA IDENTIFICADO**

En la vista de **Estimaciones > Pautas**, necesitamos mostrar la **temporada** de cada pauta, pero el endpoint actual no estÃ¡ enviando esta informaciÃ³n.

## ğŸ“Š **ENDPOINT ACTUAL**

```
GET /api/estimaciones/cuartel/{cuartel_id}/pautas
```

## ğŸ” **RESPUESTA ACTUAL**

```json
{
  "success": true,
  "data": {
    "pautas": [
      {
        "id": "uuid-pauta-1",
        "labor": "PODA",
        "fecha_inicio": "2025-08-25",
        "estado": "activo"
        // âŒ FALTA: informaciÃ³n de temporada
      },
      {
        "id": "uuid-pauta-2", 
        "labor": "RALEO",
        "fecha_inicio": "2024-11-04",
        "estado": "completado"
        // âŒ FALTA: informaciÃ³n de temporada
      }
    ]
  }
}
```

## âœ… **RESPUESTA ESPERADA**

```json
{
  "success": true,
  "data": {
    "pautas": [
      {
        "id": "uuid-pauta-1",
        "labor": "PODA",
        "fecha_inicio": "2025-08-25",
        "estado": "activo",
        "temporada": 1,                    // âœ… AGREGAR
        "id_temporada": 1,                 // âœ… AGREGAR
        "nombre_temporada": "2024-2025"    // âœ… AGREGAR (opcional)
      },
      {
        "id": "uuid-pauta-2",
        "labor": "RALEO", 
        "fecha_inicio": "2024-11-04",
        "estado": "completado",
        "temporada": 1,                    // âœ… AGREGAR
        "id_temporada": 1,                 // âœ… AGREGAR
        "nombre_temporada": "2024-2025"    // âœ… AGREGAR (opcional)
      }
    ]
  }
}
```

## ğŸ”§ **CAMPOS REQUERIDOS**

### **âœ… MÃ­nimo necesario:**
- `temporada` (INT) - NÃºmero de temporada
- `id_temporada` (INT) - ID de la temporada

### **âšª Opcional (recomendado):**
- `nombre_temporada` (STRING) - Nombre descriptivo de la temporada (ej: "2024-2025")

## ğŸ“ **CONSULTA SQL SUGERIDA**

```sql
SELECT 
    p.id,
    p.fecha_inicio,
    p.estado,
    l.nombre as labor,
    t.id as temporada,
    t.id as id_temporada,
    t.nombre as nombre_temporada
FROM conteo_fact_pauta p
JOIN conteo_dim_laborconteo l ON p.id_conteotipo = l.id
JOIN temporada_dim_temporada t ON p.id_temporada = t.id
WHERE p.id_cuartel = ?
ORDER BY p.fecha_inicio DESC
```

## ğŸ¯ **CASOS DE USO**

### **Caso 1: Temporada numÃ©rica**
```json
{
  "temporada": 1,
  "id_temporada": 1
}
```
**Frontend mostrarÃ¡:** `T1`

### **Caso 2: Temporada con nombre**
```json
{
  "temporada": 1,
  "id_temporada": 1,
  "nombre_temporada": "2024-2025"
}
```
**Frontend mostrarÃ¡:** `T1 (2024-2025)` o solo `T1`

## ğŸš€ **IMPLEMENTACIÃ“N FRONTEND**

Una vez que el backend incluya la temporada, el frontend mostrarÃ¡:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âœ‚ï¸  PODA                    ğŸ“… T1   â”‚
â”‚     ğŸ“… 25/8/2025              â†’     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â–  RALEO                   ğŸ“… T1   â”‚
â”‚     ğŸ“… 4/11/2024             â†’     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ **ACCIÃ“N REQUERIDA**

1. **Modificar endpoint** `/api/estimaciones/cuartel/{cuartel_id}/pautas`
2. **Incluir campos** `temporada` e `id_temporada` en la respuesta
3. **Probar con datos reales** para verificar que funciona
4. **Notificar al frontend** cuando estÃ© listo

---

**ğŸ“… Fecha**: 25 de Enero 2025  
**ğŸ”§ Prioridad**: Media  
**ğŸ“‹ Estado**: Pendiente de implementaciÃ³n backend
